{% extends "base.html" %}

{% block title %}Upload Files - Measurement Data Analyzer{% endblock %}

{% block content %}
<div class="page-header">
    <h1>üìÅ Upload Measurement Files</h1>
    <p>Upload your CSV and TXT measurement files to begin analysis</p>
</div>

<div class="progress-steps">
    <div class="step active">
        <span class="step-number">1</span>
        <span class="step-label">Upload Files</span>
    </div>
    <div class="step-connector"></div>
    <div class="step">
        <span class="step-number">2</span>
        <span class="step-label">Configure</span>
    </div>
    <div class="step-connector"></div>
    <div class="step">
        <span class="step-number">3</span>
        <span class="step-label">Results</span>
    </div>
</div>

<div class="upload-section">
    <div class="upload-zone-wrapper">
        <div class="upload-zone" id="upload-zone">
            <div class="upload-icon">üìÇ</div>
            <h3>Drag & Drop Files Here</h3>
            <p>or</p>
        </div>
        <input type="file" id="file-input" multiple accept=".csv,.txt" hidden>
        <button class="btn btn-primary" id="select-files-btn" onclick="document.getElementById('file-input').click()">
            Select Files
        </button>
    </div>
    
    <div class="upload-info">
        <h4>Accepted Files</h4>
        <ul>
            <li><strong>CSV files</strong> - Output device measurements (e.g., power supply)</li>
            <li><strong>TXT files</strong> - Input device readings (e.g., voltmeter)</li>
        </ul>
        <h4>Filename Pattern</h4>
        <p>Files should follow naming conventions like:</p>
        <code>DeviceName_TestValue_RangeValue_CHx.csv/txt</code>
        <p class="example">Example: VT2816A_m2V5_R10V_CH3.csv</p>
    </div>
</div>

<div class="file-list-section" id="file-list-section" style="display: none;">
    <h3>Uploaded Files</h3>
    <div class="file-stats" id="file-stats"></div>
    <div class="file-list" id="file-list"></div>
    <div class="action-buttons">
        <button class="btn btn-secondary" onclick="clearFiles()">Clear All</button>
        <button class="btn btn-primary" onclick="proceedToConfigure()" id="proceed-btn" disabled>
            Continue to Configuration ‚Üí
        </button>
    </div>
</div>

<div class="loading-overlay" id="loading-overlay" style="display: none;">
    <div class="spinner"></div>
    <p>Analyzing files...</p>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/upload.js') }}"></script>
{% endblock %}
